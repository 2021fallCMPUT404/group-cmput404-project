{% extends 'posts/base.html' %}



{% block content %}
{% load markdown_ext %}
<a href = '{%  url "foreign-posts" %}'>Foreign Posts</a>
<br>
<a href="{% url 'users:t03_posts' %}">Group 3 Posts</a>
{% if latest_post_list %}

<ul>
    <br>
    <!--<p>{{latest_post_list}}</p>-->
    {% for posts in latest_post_list %}

    <div class='pub-info'>
        <p><img src="{{ posts.author.user_profile.profileImage.url }}" width='30px' height="30"> {{posts.author}}</p>
        <p>{{posts.published}} 
            {%if posts.visibility == '0'%}
                <i class="fa fa-globe"></i>
            {%else%}
                <i class="fa fa-users"></i>
            {%endif%}
        </p>
    </div>
    

    <li><a href="/post/{{ posts.id }}/" class="addpost-header">
            {%if not posts.shared_user%}
                <h2>{{ posts.content }}</h2>
            {%else%}
                <h2>Repost: {{ posts.content }}</h2>
            {% endif %}
        </a></li>
    <div class='content'>

        {% if posts.image %}
        <img src='{{posts.image.url}}' width="30%">
        {% endif %}
        <!--separate markdown and plain text-->
        {%if posts.contentType == "text/markdown" %}
            <p>{{ posts.content | markdown | safe }}</p>
        {%else%}
            <p>{{ posts.content }}</p>
        {% endif %}
    </div>
    {%if not posts.shared_user and current_user == posts.author %}
        <a href="{% url 'editpost' posts.pk %}" class='btn btn-info'><i class="fa fa-pencil-square-o"></i> Edit</a>
    {%elif posts.shared_user%}
        <p>Shared by {{ posts.shared_user }}</p>
    {% endif %}
    <br><hr class="mt-2 mb-3"/><br>
    {% endfor %}
</ul>
{% else %}
<p>No posts are available.</p>
{% endif %}
<a class='return' href="{% url 'users:user_home_page' %}"><i class="fa fa-arrow-left"></i> Go Back</a>

{% endblock content %}