{% extends 'posts/base.html' %}

{% block content %}

<div class='post-wrapper'>
    <h1>Author: {{post.author}}</h1>
    <p>Text: {{post.text}}</p>
    {% if post.image %}
    <img src='{{post.image.url}}' width="30%">
    {% endif %}
    <p>Date: {{post.pub_date}}</p>
    <p>ID: {{post.id}}</p>

    <a href="{% url 'editpost' post.pk %} " class="btn btn-primary">Edit Post</a>
    <a href="{% url 'deletepost' post.pk %}" class="btn btn-danger">Delete Post</a>
    <a href="{% url 'addcomment' post.pk %}" class="btn btn-danger">Comment on Post</a>
    
    <form action = "{% url 'likepost' post.pk %}" method = "POST" class="likeButton">
        {% csrf_token %}
        <button type = 'submit', name = 'post_id', value = "{{ post.id }}"><i class="far fa-thumbs-up"></i></button>
    </form>
    <p id = 'total_likes'>Number of Likes - {{ post.like.count }}</p>
    <a class='return' href="{% url 'feed'  %}">Go Back</a>
</div>
<br>
<br>
<h2>Leave a comment</h2>
<p>Total number of comments : {{post.comments.count}}</p>
<h2>Comments</h2>

{%if not post.comments.all %}
No comment yet <br>
<a href="{% url 'addcomment' post.pk %}">Add Comment</a>

{%else%}
<a href="{% url 'addcomment' post.pk %}">Add Comment</a>
<p>
    {%for comment in post.comments.all%}

    <br>
    <strong>
        {{user.user_profile.displayName}} &nbsp; &nbsp;&nbsp; {{comment.comment_created}}
        <form action = "{% url 'likecomment' post.pk %}" method = "POST" class="likeButton">
            {% csrf_token %}
            <button type = 'submit', name = 'comment_id', value = "{{ comment.id }}"><i class="far fa-thumbs-up"></i></button>
        </form>
        <p>Number of Likes - {{ comment.like.count }}</p>
        <br><br>
    </strong>
    {{comment.comment_body}}



    <br>

    {% endfor %}

</p>

{% endif %}




<br><br>


<script>
   
</script>
{% endblock content %}

